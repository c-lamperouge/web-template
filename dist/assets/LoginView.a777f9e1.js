import{o as g,c as y,a as e,_ as k,d as B,j as L,u as x,I as P,k as N,t as R,r as l,f as U,l as O,n as m,b,m as E,v as S,w as H,q,V as _,p as J,e as K,s as F,x as Y,y as G}from"./index.2f1c663d.js";import{I as Q,D as W}from"./DialogBackdrop.cc3e9a7f.js";import{R as z,K as X}from"./ResponseResult.c4953746.js";var Z="/assets/logo.03d6d6da.png";const ee={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},oe=e("path",{fill:"currentColor",d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2s2 .9 2 2s-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1c1.71 0 3.1 1.39 3.1 3.1v2z"},null,-1),ae=[oe];function te(a,t){return g(),y("svg",ee,ae)}var ne={name:"ic-baseline-lock",render:te};const le=B({__name:"DialogLoadingSlot",setup(a){return(t,o)=>(g(),L(x(P),{class:"icon-loop"}))}});var ie=k(le,[["__scopeId","data-v-2e621859"]]);const se=B({__name:"DialogMessageSlot",props:{content:null,color:{default:"black"}},emits:["close"],setup(a,{emit:t}){N(c=>({"2fbe4fb5":a.color}));const o=()=>{t("close")};return(c,s)=>(g(),y("div",{class:"slot-container",onClick:o},[e("p",null,R(a.content),1)]))}});var re=k(se,[["__scopeId","data-v-7b4d1b6b"]]);const ce=async(a,t)=>{const o=await fetch("/sys/login",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({mobile:a,password:t})});return o.ok?new z("postLogin","success",o):new z("postLogin","failure",o)};const w=a=>(J("data-v-07140c26"),a=a(),K(),a),ue=["data-view-name"],de=w(()=>e("section",{class:"login-left"},[e("img",{src:Z,alt:"logo",class:"logo"}),e("h2",null," Vue\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF ")],-1)),ve={class:"login-right"},pe=w(()=>e("h3",null,"\u767B\u5F55",-1)),ge=w(()=>e("p",{class:"to-sign"},[F(" \u8FD8\u6CA1\u6709\u8D26\u53F7\uFF0C"),e("span",{tabindex:"0"},"\u53BB\u6CE8\u518C")],-1)),fe=w(()=>e("div",null,[F(" \u8D26\u53F7\uFF1A13800000002 "),e("br"),F(" \u5BC6\u7801\uFF1A123456 ")],-1)),he=B({__name:"LoginView",setup(a){let t=l(""),o=l(!0),c=l(""),s=l(!0);const C=()=>{/^\w{6,16}$/.test(t.value)?o.value=!0:o.value=!1},V=()=>{/^\w{6,16}$/.test(c.value)?s.value=!0:s.value=!1};let f=l(!1);const A=()=>{f.value=!0},I=()=>{f.value=!1,C()};let h=l(!1);const T=()=>{h.value=!0},j=()=>{h.value=!1,V()};let r=l(!1),u=l(0);const M=U(()=>{switch(u.value){case 0:return ie;case 1:return re;default:throw new Error("unknown ovelay slot")}});let v=l(""),p=l(void 0);const D=O(),$=async()=>{if(C(),!o.value){r.value=!0,u.value=1,v.value="\u8D26\u53F7\u683C\u5F0F\u9519\u8BEF\uFF08\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C6\u523016\u4F4D\uFF09",p.value=void 0;return}if(V(),!s.value){r.value=!0,u.value=1,v.value="\u5BC6\u7801\u683C\u5F0F\u9519\u8BEF\uFF08\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C6\u523016\u4F4D\uFF09",p.value=void 0;return}r.value=!0,u.value=0;try{X(await ce(t.value,c.value)).with({responseType:"success"},async i=>{const n=await i.responseContent.json();await Y(n.data),r.value=!1,history.pushState(_.Main,"main","/main"),D.appViewTransitionType=G.SlideUp,D.appActiveView=_.Main}).otherwise(()=>{u.value=1,v.value="\u670D\u52A1\u5668\u54CD\u5E94\u9519\u8BEF",p.value="red"})}catch(i){if(i instanceof Error)switch(i.message){case"Failed to fetch":u.value=1,v.value="\u7F51\u7EDC\u8BF7\u6C42\u9519\u8BEF",p.value="red";break;default:console.log(i)}else console.log(i)}};return(i,n)=>(g(),y("div",{class:"login-view","data-view-name":x(_).Login},[e("main",null,[de,e("section",ve,[pe,e("div",{class:m(["row",{"focus-valid":f.value&&o.value,"focus-invalid":f.value&&!o.value,invalid:!o.value}])},[b(x(Q),{class:"icon-block"}),E(e("input",{"onUpdate:modelValue":n[0]||(n[0]=d=>t.value=d),maxlength:"16",class:m({invalid:!o.value}),type:"text",placeholder:"\u8BF7\u8F93\u5165\u5E10\u53F7",onFocus:A,onBlur:I},null,34),[[S,t.value,void 0,{trim:!0}]])],2),e("div",{class:m(["row",{"focus-valid":h.value&&s.value,"focus-invalid":h.value&&!s.value,invalid:!s.value}])},[b(x(ne),{class:"icon-block"}),E(e("input",{"onUpdate:modelValue":n[1]||(n[1]=d=>c.value=d),class:m({invalid:!s.value}),type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",maxlength:"16",onFocus:T,onBlur:j},null,34),[[S,c.value,void 0,{trim:!0}]])],2),e("button",{class:"login-button",onClick:$}," \u767B\u5F55 "),ge])]),fe,b(W,{modelValue:r.value,"onUpdate:modelValue":n[3]||(n[3]=d=>r.value=d),"backdrop-theme":"light","slot-transition-name":"scale","enable-close":!1},{default:H(()=>[(g(),L(q(M.value),{content:v.value,color:p.value,onClose:n[2]||(n[2]=d=>r.value=!1)},null,40,["content","color"]))]),_:1},8,["modelValue"])],8,ue))}});var be=k(he,[["__scopeId","data-v-07140c26"]]);export{be as default};
