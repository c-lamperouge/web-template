var J=Object.defineProperty;var K=(a,e,o)=>e in a?J(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o;var _=(a,e,o)=>(K(a,typeof e!="symbol"?e+"":e,o),o);import{o as y,c as z,a as s,_ as T,d as j,j as O,u as k,I as Y,k as G,t as Q,r as u,f as W,l as X,n as F,b as S,m as I,v as M,w as Z,q as ee,V as E,p as ae,e as te,s as D,x as oe,y as ne}from"./index.98af5d37.js";import{I as se,D as le}from"./DialogBackdrop.d3db4775.js";var re="/assets/logo.03d6d6da.png";const ie={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ue=s("path",{fill:"currentColor",d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2s2 .9 2 2s-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1c1.71 0 3.1 1.39 3.1 3.1v2z"},null,-1),ce=[ue];function de(a,e){return y(),z("svg",ie,ce)}var ve={name:"ic-baseline-lock",render:de};const pe=j({__name:"DialogLoadingSlot",setup(a){return(e,o)=>(y(),O(k(Y),{class:"icon-loop"}))}});var he=T(pe,[["__scopeId","data-v-2e621859"]]);const fe=j({__name:"DialogMessageSlot",props:{content:null,color:{default:"black"}},emits:["close"],setup(a,{emit:e}){G(t=>({"2fbe4fb5":a.color}));const o=()=>{e("close")};return(t,n)=>(y(),z("div",{class:"slot-container",onClick:o},[s("p",null,Q(a.content),1)]))}});var ge=T(fe,[["__scopeId","data-v-7b4d1b6b"]]);const A=Symbol("@ts-pattern/matcher"),$="@ts-pattern/anonymous-select-key",N=a=>Boolean(a&&typeof a=="object"),V=a=>a&&!!a[A],w=(a,e,o)=>{if(N(a)){if(V(a)){const t=a[A](),{matched:n,selections:l}=t.match(e);return n&&l&&Object.keys(l).forEach(r=>o(r,l[r])),n}if(!N(e))return!1;if(Array.isArray(a))return!!Array.isArray(e)&&a.length===e.length&&a.every((t,n)=>w(t,e[n],o));if(a instanceof Map)return e instanceof Map&&Array.from(a.keys()).every(t=>w(a.get(t),e.get(t),o));if(a instanceof Set){if(!(e instanceof Set))return!1;if(a.size===0)return e.size===0;if(a.size===1){const[t]=Array.from(a.values());return V(t)?Array.from(e.values()).every(n=>w(t,n,o)):e.has(t)}return Array.from(a.values()).every(t=>e.has(t))}return Object.keys(a).every(t=>{const n=a[t];return(t in e||V(l=n)&&l[A]().matcherType==="optional")&&w(n,e[t],o);var l})}return Object.is(e,a)},me=a=>new b(a,[]);class b{constructor(e,o){this.value=void 0,this.cases=void 0,this.value=e,this.cases=o}with(...e){const o=e[e.length-1],t=[e[0]],n=[];return e.length===3&&typeof e[1]=="function"?(t.push(e[0]),n.push(e[1])):e.length>2&&t.push(...e.slice(1,e.length-1)),new b(this.value,this.cases.concat([{match:l=>{let r={};const d=Boolean(t.some(g=>w(g,l,(C,p)=>{r[C]=p}))&&n.every(g=>g(l)));return{matched:d,value:d&&Object.keys(r).length?$ in r?r[$]:r:l}},handler:o}]))}when(e,o){return new b(this.value,this.cases.concat([{match:t=>({matched:Boolean(e(t)),value:t}),handler:o}]))}otherwise(e){return new b(this.value,this.cases.concat([{match:o=>({matched:!0,value:o}),handler:e}])).run()}exhaustive(){return this.run()}run(){let e,o=this.value;for(let t=0;t<this.cases.length;t++){const n=this.cases[t],l=n.match(this.value);if(l.matched){o=l.value,e=n.handler;break}}if(!e){let t;try{t=JSON.stringify(this.value)}catch{t=this.value}throw new Error(`Pattern matching error: no pattern matches value ${t}`)}return e(o,this.value)}}class P{constructor(e,o,t){_(this,"requestName");_(this,"responseType");_(this,"responseContent");this.requestName=e,this.responseType=o,this.responseContent=t}}const xe=async(a,e)=>{const o=await fetch("/sys/login",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({mobile:a,password:e})});return o.ok?new P("postLogin","success",o):new P("postLogin","failure",o)};const B=a=>(ae("data-v-2d00780a"),a=a(),te(),a),we=["data-view-name"],be=B(()=>s("section",{class:"login-left"},[s("img",{src:re,alt:"logo",class:"logo"}),s("h2",null," Vue\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF ")],-1)),ye={class:"login-right"},_e=B(()=>s("h3",null,"\u767B\u5F55",-1)),Fe=B(()=>s("p",{class:"to-sign"},[D(" \u8FD8\u6CA1\u6709\u8D26\u53F7\uFF0C"),s("span",{tabindex:"0"},"\u53BB\u6CE8\u518C")],-1)),ke=B(()=>s("div",null,[D(" \u8D26\u53F7\uFF1A13800000002 "),s("br"),D(" \u5BC6\u7801\uFF1A123456 ")],-1)),Be=j({__name:"LoginView",setup(a){let e=u(""),o=u(!0),t=u(""),n=u(!0);const l=()=>{/^\w{6,16}$/.test(e.value)?o.value=!0:o.value=!1},r=()=>{/^\w{6,16}$/.test(t.value)?n.value=!0:n.value=!1};let d=u(!1);const g=()=>{d.value=!0},C=()=>{d.value=!1,l()};let p=u(!1);const R=()=>{p.value=!0},q=()=>{p.value=!1,r()};let v=u(!1),h=u(0);const U=W(()=>{switch(h.value){case 0:return he;case 1:return ge;default:throw new Error("unknown ovelay slot")}});let m=u(""),x=u(void 0);const L=X(),H=async()=>{if(l(),!o.value){v.value=!0,h.value=1,m.value="\u8D26\u53F7\u683C\u5F0F\u9519\u8BEF\uFF08\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C6\u523016\u4F4D\uFF09",x.value=void 0;return}if(r(),!n.value){v.value=!0,h.value=1,m.value="\u5BC6\u7801\u683C\u5F0F\u9519\u8BEF\uFF08\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C6\u523016\u4F4D\uFF09",x.value=void 0;return}v.value=!0,h.value=0;try{me(await xe(e.value,t.value)).with({responseType:"success"},async c=>{const i=await c.responseContent.json();await oe(i.data),v.value=!1,history.pushState(E.Test,"test","/test"),L.appViewTransitionType=ne.SlideRight,L.appActiveView=E.Test}).otherwise(()=>{h.value=1,m.value="\u670D\u52A1\u5668\u54CD\u5E94\u9519\u8BEF",x.value="red"})}catch(c){if(c instanceof Error)switch(c.message){case"Failed to fetch":h.value=1,m.value="\u7F51\u7EDC\u8BF7\u6C42\u9519\u8BEF",x.value="red";break;default:console.log(c)}else console.log(c)}};return(c,i)=>(y(),z("div",{class:"login-view","data-view-name":k(E).Login},[s("main",null,[be,s("section",ye,[_e,s("div",{class:F(["row",{"focus-valid":d.value&&o.value,"focus-invalid":d.value&&!o.value,invalid:!o.value}])},[S(k(se),{class:"icon-block"}),I(s("input",{"onUpdate:modelValue":i[0]||(i[0]=f=>e.value=f),maxlength:"16",class:F({invalid:!o.value}),type:"text",placeholder:"\u8BF7\u8F93\u5165\u5E10\u53F7",onFocus:g,onBlur:C},null,34),[[M,e.value,void 0,{trim:!0}]])],2),s("div",{class:F(["row",{"focus-valid":p.value&&n.value,"focus-invalid":p.value&&!n.value,invalid:!n.value}])},[S(k(ve),{class:"icon-block"}),I(s("input",{"onUpdate:modelValue":i[1]||(i[1]=f=>t.value=f),class:F({invalid:!n.value}),type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",maxlength:"16",onFocus:R,onBlur:q},null,34),[[M,t.value,void 0,{trim:!0}]])],2),s("button",{class:"login-button",onClick:H}," \u767B\u5F55 "),Fe])]),ke,S(le,{modelValue:v.value,"onUpdate:modelValue":i[3]||(i[3]=f=>v.value=f),"backdrop-theme":"light","slot-transition-name":"scale","enable-close":!1},{default:Z(()=>[(y(),O(ee(U.value),{content:m.value,color:x.value,onClose:i[2]||(i[2]=f=>v.value=!1)},null,40,["content","color"]))]),_:1},8,["modelValue"])],8,we))}});var Ve=T(Be,[["__scopeId","data-v-2d00780a"]]);export{Ve as default};
